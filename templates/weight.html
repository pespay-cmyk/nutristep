{% extends "base.html" %}

{% block title %}Suivi du poids - NutriStep{% endblock %}

{% block content %}
<h1 style="margin-bottom: 30px; color: #333;">‚öñÔ∏è Suivi du poids</h1>

<div class="card">
    <h2>‚ûï Ajouter une pes√©e</h2>
    <form method="POST" action="{{ url_for('add_weight') }}">
        <div style="display: grid; grid-template-columns: 1fr 1fr 2fr auto; gap: 15px; align-items: end;">
            <div class="form-group" style="margin-bottom: 0;">
                <label for="weight">Poids (kg)</label>
                <input type="number" step="0.1" class="form-control" id="weight" name="weight" required>
            </div>
            
            <div class="form-group" style="margin-bottom: 0;">
                <label for="date">Date</label>
                <input type="date" class="form-control" id="date" name="date" value="{{ today }}" required>
            </div>
            
            <div class="form-group" style="margin-bottom: 0;">
                <label for="note">Note (optionnel)</label>
                <input type="text" class="form-control" id="note" name="note" placeholder="Ex: Apr√®s le sport">
            </div>
            
            <button type="submit" class="btn btn-primary">Enregistrer</button>
        </div>
    </form>
</div>

<div class="card">
    <h2>üìã Historique</h2>
    {% if entries %}
        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Poids</th>
                    <th>Note</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for entry in entries %}
                <tr>
                    <td>{{ entry.date.strftime('%d/%m/%Y') }}</td>
                    <td><strong>{{ entry.weight }} kg</strong></td>
                    <td>{{ entry.note or '--' }}</td>
                    <td>
                        <a href="{{ url_for('delete_weight', id=entry.id) }}" 
                           class="btn btn-danger btn-small"
                           onclick="return confirm('Supprimer cette entr√©e ?')">
                            üóëÔ∏è Supprimer
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p style="color: #999; text-align: center; padding: 40px;">Aucune pes√©e enregistr√©e pour le moment</p>
    {% endif %}
</div>
{% endblock %}

{% block extra_js %}
<script>
    // D√©finir la date par d√©faut √† aujourd'hui
    document.getElementById('date').valueAsDate = new Date();
</script>
{% endblock %}
